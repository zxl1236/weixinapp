<view class="container">
  <!-- ä¼šå‘˜çŠ¶æ€å¡ç‰‡ -->
  <view class="membership-card {{membershipStatus.isPremium ? 'premium' : 'free'}}">
    <view class="membership-header">
      <view class="membership-icon">{{membershipStatus.isPremium ? 'ğŸ‘‘' : 'ğŸ“š'}}</view>
      <view class="membership-info">
        <view class="membership-title">
          {{membershipStatus.isPremium ? 'é«˜çº§ä¼šå‘˜' : 'å…è´¹ç”¨æˆ·'}}
        </view>
        <view class="membership-desc" wx:if="{{membershipStatus.isPremium}}">
          åˆ°æœŸæ—¶é—´ï¼š{{expireTimeText}}
        </view>
        <view class="membership-desc" wx:else>
          å‡çº§äº«å—å…¨éƒ¨åŠŸèƒ½
        </view>
      </view>
    </view>
  </view>

  <!-- ä¼šå‘˜ç‰¹æƒå¯¹æ¯” -->
  <view class="privilege-section">
    <view class="section-title">ğŸŒŸ ä¼šå‘˜ç‰¹æƒå¯¹æ¯”</view>
    
    <view class="privilege-table">
      <view class="privilege-header">
        <view class="privilege-item-name">åŠŸèƒ½ç‰¹æƒ</view>
        <view class="privilege-free">å…è´¹ç‰ˆ</view>
        <view class="privilege-premium">é«˜çº§ä¼šå‘˜</view>
      </view>
      
      <view class="privilege-row" wx:for="{{privilegeList}}" wx:key="name">
        <view class="privilege-item-name">{{item.name}}</view>
        <view class="privilege-free">
          <view class="privilege-value {{item.freeStatus ? 'enabled' : 'disabled'}}">
            {{item.free}}
          </view>
        </view>
        <view class="privilege-premium">
          <view class="privilege-value enabled">{{item.premium}}</view>
        </view>
      </view>
    </view>
  </view>

  <!-- å¥—é¤é€‰æ‹© -->
  <view class="plan-section" wx:if="{{!membershipStatus.isPremium}}">
    <view class="section-title">ğŸ’ é€‰æ‹©å¥—é¤</view>
    
    <view class="plan-list">
      <view class="plan-card {{selectedPlan === item.id ? 'selected' : ''}}" 
            wx:for="{{planList}}" 
            wx:key="id"
            bindtap="selectPlan"
            data-plan="{{item.id}}">
        <view class="plan-header">
          <view class="plan-name">{{item.name}}</view>
          <view class="plan-badge" wx:if="{{item.popular}}">ğŸ”¥ çƒ­é—¨</view>
        </view>
        <view class="plan-price">
          <view class="price-main">Â¥{{item.price}}</view>
          <view class="price-unit">/{{item.unit}}</view>
        </view>
        <view class="plan-original" wx:if="{{item.originalPrice}}">
          åŸä»·ï¼šÂ¥{{item.originalPrice}}
        </view>
        <view class="plan-desc">{{item.desc}}</view>
      </view>
    </view>
  </view>

  <!-- æ”¯ä»˜æŒ‰é’® -->
  <view class="payment-section" wx:if="{{!membershipStatus.isPremium}}">
    <view class="payment-summary">
      <view class="summary-text">é€‰æ‹©ï¼š{{selectedPlanInfo.name}}</view>
      <view class="summary-price">Â¥{{selectedPlanInfo.price}}</view>
    </view>
    
    <button class="pay-btn" 
            bindtap="startPayment" 
            disabled="{{!selectedPlan || paymentLoading}}">
      <view wx:if="{{paymentLoading}}" class="loading-text">
        <view class="loading-icon">â³</view>
        æ”¯ä»˜ä¸­...
      </view>
      <view wx:else>
        ç«‹å³æ”¯ä»˜ Â¥{{selectedPlanInfo.price}}
      </view>
    </button>
    
    <view class="payment-tips">
      <view class="tip-item">â€¢ æ”¯ä»˜æˆåŠŸåç«‹å³ç”Ÿæ•ˆ</view>
      <view class="tip-item">â€¢ æ”¯æŒå¾®ä¿¡å®‰å…¨æ”¯ä»˜</view>
      <view class="tip-item">â€¢ è´­ä¹°åå¯åœ¨ä¸ªäººä¸­å¿ƒæŸ¥çœ‹</view>
    </view>
  </view>

  <!-- å·²æ˜¯ä¼šå‘˜çš„ç»­è´¹åŒºåŸŸ -->
  <view class="renewal-section" wx:if="{{membershipStatus.isPremium}}">
    <view class="renewal-info">
      <view class="renewal-title">âœ¨ ç»­è´¹ä¼šå‘˜</view>
      <view class="renewal-desc">ç»§ç»­äº«å—é«˜çº§ä¼šå‘˜ç‰¹æƒ</view>
    </view>
    
    <button class="renewal-btn" bindtap="showRenewalOptions">
      ç»­è´¹ä¼šå‘˜
    </button>
  </view>

  <!-- ç”¨æˆ·ä½¿ç”¨ç»Ÿè®¡ -->
  <view class="stats-section">
    <view class="section-title">ğŸ“Š ä½¿ç”¨ç»Ÿè®¡</view>
    
    <view class="stats-grid">
      <view class="stats-item">
        <view class="stats-number">{{userStats.totalTestCount}}</view>
        <view class="stats-label">ç´¯è®¡æµ‹è¯•</view>
      </view>
      <view class="stats-item">
        <view class="stats-number">{{userStats.dailyUsage.testCount}}</view>
        <view class="stats-label">ä»Šæ—¥æµ‹è¯•</view>
      </view>
      <view class="stats-item">
        <view class="stats-number">{{remainingTests.unlimited ? 'âˆ' : remainingTests.count}}</view>
        <view class="stats-label">å‰©ä½™æ¬¡æ•°</view>
      </view>
    </view>
  </view>

  <!-- å¸¸è§é—®é¢˜ -->
  <view class="faq-section">
    <view class="section-title">â“ å¸¸è§é—®é¢˜</view>
    
    <view class="faq-list">
      <view class="faq-item" wx:for="{{faqList}}" wx:key="question" bindtap="toggleFaq" data-index="{{index}}">
        <view class="faq-question">
          <view class="faq-text">{{item.question}}</view>
          <view class="faq-arrow {{item.expanded ? 'expanded' : ''}}">â–¼</view>
        </view>
        <view class="faq-answer {{item.expanded ? 'show' : ''}}" style="{{item.expanded ? 'max-height: 200px' : ''}}">
          {{item.answer}}
        </view>
      </view>
    </view>
  </view>
</view>
