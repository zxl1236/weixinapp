<!-- pages/progressList/progressList.wxml -->
<view class="progress-list-page">
  <view class="progress-list-container">
    
    <!-- é¡µé¢æ ‡é¢˜ -->
    <view class="page-header">
      <text class="page-title">å­¦ä¹ è¿›åº¦</text>
      <text class="page-subtitle">æŸ¥çœ‹å„å¹´çº§å­¦ä¹ æƒ…å†µ</text>
    </view>

    <!-- åŠ è½½çŠ¶æ€ -->
    <view class="loading-container" wx:if="{{loading}}">
      <text class="loading-text">åŠ è½½ä¸­...</text>
    </view>

    <!-- å¹´çº§åˆ—è¡¨ -->
    <view class="stages-list" wx:else>
      <block wx:for="{{stages}}" wx:key="id">
        <view class="stage-section">
          <!-- é˜¶æ®µæ ‡é¢˜ -->
          <view class="stage-header">
            <text class="stage-icon">{{item.icon}}</text>
            <view class="stage-info">
              <text class="stage-name">{{item.name}}</text>
              <text class="stage-desc">{{item.description}}</text>
            </view>
          </view>

          <!-- å¹´çº§åˆ—è¡¨ -->
          <view class="grades-list">
            <view
              class="grade-item"
              wx:for="{{item.grades}}"
              wx:for-item="grade"
              wx:key="id"
              data-gradeid="{{grade.id}}"
              data-gradename="{{grade.name}}"
              bindtap="navigateToGradeProgress"
              hover-class="grade-item-press"
            >
              <view class="grade-content">
                <view class="grade-header">
                  <text class="grade-name">{{grade.name}}</text>
                  <text class="grade-mastery-rate">{{grade.masteryRate || 0}}%</text>
                </view>
                
                <view class="grade-stats">
                  <view class="stat-item">
                    <text class="stat-label">æ€»è¯æ±‡</text>
                    <text class="stat-value">{{grade.totalWords || 0}}</text>
                  </view>
                  <view class="stat-divider"></view>
                  <view class="stat-item">
                    <text class="stat-label">å·²æŒæ¡</text>
                    <text class="stat-value">{{grade.mastered || 0}}</text>
                  </view>
                </view>

                <!-- è¿›åº¦æ¡ -->
                <view class="progress-bar-container">
                  <view class="progress-bar-bg">
                    <view 
                      class="progress-bar-fill" 
                      style="width: {{grade.masteryRate || 0}}%"
                    ></view>
                  </view>
                </view>
              </view>

              <text class="grade-arrow">â€º</text>
            </view>
          </view>
        </view>
      </block>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-container" wx:if="{{!loading && stages.length === 0}}">
      <text class="empty-icon">ğŸ“š</text>
      <text class="empty-text">æš‚æ— å­¦ä¹ è¿›åº¦</text>
      <text class="empty-hint">å¿«å»å¼€å§‹å­¦ä¹ å§ï¼</text>
    </view>

  </view>
</view>

