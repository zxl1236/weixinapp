<view class="container">
  <!-- é¡µé¢å¤´éƒ¨ -->
  <view class="header">
    <view class="grade-info">
      <view class="grade-name">{{gradeName}}</view>
      <view class="word-count">å…± {{totalCount}} ä¸ªå•è¯</view>
    </view>
  </view>

  <!-- æœç´¢å’Œæ’åºæ  -->
  <view class="toolbar">
    <view class="search-box">
      <input 
        class="search-input" 
        type="text" 
        placeholder="æœç´¢å•è¯æˆ–å«ä¹‰..." 
        value="{{searchKeyword}}"
        bindinput="onSearchInput"
      />
      <view class="search-icon">ğŸ”</view>
    </view>
    
    <view class="sort-buttons">
      <button 
        class="sort-btn {{sortType === 'serial' ? 'active' : ''}}"
        bindtap="changeSortType"
        data-type="serial"
        size="mini"
      >
        æŒ‰åºå·
      </button>
      <button 
        class="sort-btn {{sortType === 'word' ? 'active' : ''}}"
        bindtap="changeSortType"
        data-type="word"
        size="mini"
      >
        æŒ‰å•è¯
      </button>
      <button 
        class="sort-btn {{sortType === 'meaning' ? 'active' : ''}}"
        bindtap="changeSortType"
        data-type="meaning"
        size="mini"
      >
        æŒ‰å«ä¹‰
      </button>
    </view>
  </view>

  <!-- å•è¯åˆ—è¡¨ -->
  <view class="word-list" wx:if="{{!loading}}">
    <view class="list-header">
      <text>æ˜¾ç¤º {{showingCount}} / {{totalCount}} ä¸ªå•è¯</text>
    </view>
    
    <view 
      class="word-card" 
      wx:for="{{filteredWords}}" 
      wx:key="serialNumber"
    >
      <view class="word-header">
        <view class="word-serial">#{{item.serialNumber || index + 1}}</view>
        <view class="word-text">{{item.word}}</view>
        <button class="word-pronunciation-btn {{playingWordId === item.word ? 'playing' : ''}}" 
                bindtap="playWordPronunciation" 
                data-word="{{item.word}}"
                data-grade="{{gradeId}}"
                disabled="{{playingWordId === item.word}}">
          <view class="pronunciation-circle"></view>
          <view class="pronunciation-waveform">
            <view class="waveform-bar"></view>
            <view class="waveform-bar"></view>
            <view class="waveform-bar"></view>
            <view class="waveform-bar"></view>
            <view class="waveform-bar"></view>
          </view>
        </button>
      </view>
      
      <view class="word-phonetic" wx:if="{{item.phonetic}}">
        {{item.phonetic}}
      </view>
      
      <view class="word-meaning">
        {{item.meaning}}
      </view>
      
      <view class="word-highlight" wx:if="{{item.highlightLetters || item.highlightPhonetic}}">
        <text wx:if="{{item.highlightLetters}}" class="highlight-item">
          å­—æ¯: {{item.highlightLetters}}
        </text>
        <text wx:if="{{item.highlightPhonetic}}" class="highlight-item">
          éŸ³æ ‡: {{item.highlightPhonetic}}
        </text>
      </view>
      
      <view class="word-note" wx:if="{{item.note}}">
        <text class="note-label">å¤‡æ³¨:</text>
        <text class="note-text">{{item.note}}</text>
      </view>
    </view>
  </view>

  <!-- åŠ è½½ä¸­ -->
  <view class="loading-container" wx:if="{{loading}}">
    <view class="loading-text">åŠ è½½å•è¯ä¸­...</view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-container" wx:if="{{!loading && filteredWords.length === 0}}">
    <view class="empty-icon">ğŸ“</view>
    <view class="empty-text">
      <text wx:if="{{searchKeyword}}">æœªæ‰¾åˆ°åŒ¹é…çš„å•è¯</text>
      <text wx:else>æš‚æ— å•è¯æ•°æ®</text>
    </view>
  </view>

  <!-- åº•éƒ¨æ“ä½œæ  -->
  <view class="footer-actions" wx:if="{{!loading && filteredWords.length > 0}}">
    <button class="export-btn" bindtap="exportToPDF">
      ğŸ“„ å¯¼å‡ºPDF
    </button>
    <button class="back-btn" bindtap="goBack">
      è¿”å›
    </button>
  </view>
</view>

