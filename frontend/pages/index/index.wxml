<view class="container">
  <!-- å…¨å±æˆæƒå¼¹çª— -->
  <view class="auth-modal" wx:if="{{showAuthModal}}">
    <view class="auth-overlay" bindtap="closeAuthModal"></view>
    <view class="auth-content">
      <view class="auth-header">
        <view class="auth-icon">ğŸ‘¤</view>
        <view class="auth-title">å®Œå–„ä¸ªäººä¿¡æ¯</view>
        <view class="auth-desc">æˆæƒè·å–æ‚¨çš„æ˜µç§°å’Œå¤´åƒï¼Œä¸ºæ‚¨æä¾›æ›´å¥½çš„ä¸ªæ€§åŒ–å­¦ä¹ ä½“éªŒ</view>
      </view>
      <view class="auth-buttons">
        <button class="auth-btn auth-btn-primary" bindtap="getUserProfile" style="display: flex; align-items: center; justify-content: center; position: relative; left: 2rpx; top: 0rpx;">
  æˆæƒç™»å½•
</button>

<button class="auth-btn auth-btn-secondary" bindtap="closeAuthModal" style="display: flex; align-items: center; justify-content: center; position: relative; left: 6rpx; top: 4rpx;">
  ç¨åå†è¯´
</button>

      </view>
    </view>
  </view>

  <!-- å¤´éƒ¨åŒºåŸŸ -->
  <view class="header hero">
    <view class="title">åŒæ­¥è‡ªç„¶æ‹¼è¯»ä¸“é¡¹è®­ç»ƒ</view>
    <view class="subtitle">è®¤ã€è¯»ã€æ‹¼ä¸‰åˆä¸€ï¼Œç»ƒå¥½åŸºæœ¬åŠŸï¼</view>
  </view>

  <!-- ä¼šå‘˜çŠ¶æ€åŒºåŸŸ -->
  <view class="membership-status">
    <view class="status-card {{membershipStatus.isPremium ? 'premium glass' : 'free bordered'}}">
      <view class="status-info">
        <view class="status-icon">{{membershipStatus.isPremium ? 'ğŸ‘‘' : 'ğŸ“š'}}</view>
        <view class="status-text">
          <view class="status-title">{{membershipStatus.isPremium ? 'é«˜çº§ä¼šå‘˜' : 'å…è´¹ç”¨æˆ·'}}</view>
          <view class="status-desc" wx:if="{{membershipStatus.isPremium}}">äº«å—æ— é™åˆ¶å­¦ä¹ æƒç›Š</view>
          <view class="status-desc" wx:else>ä»Šæ—¥å‰©ä½™æµ‹è¯•æ¬¡æ•°ï¼š{{remainingTests}}</view>
        </view>
      </view>
      <view class="status-action">
        <button class="status-btn {{membershipStatus.isPremium ? 'manage ghost' : 'upgrade primary'}}"
                bindtap="{{membershipStatus.isPremium ? 'goToPayment' : 'goToUpgrade'}}"
                size="mini">
          {{membershipStatus.isPremium ? 'ç®¡ç†' : 'å‡çº§'}}
        </button>
      </view>
    </view>
    
    <!-- æœªç™»å½•æç¤º -->
    <view class="login-prompt" wx:if="{{false}}">
      <view class="login-prompt-card">
        <view class="login-prompt-icon">âš ï¸</view>
        <view class="login-prompt-text">
          <view class="login-prompt-title">æœªç™»å½•</view>
          <view class="login-prompt-desc">è¯·å…ˆç™»å½•ä»¥ä½¿ç”¨å®Œæ•´åŠŸèƒ½</view>
        </view>
        <button class="login-prompt-btn" bindtap="reLogin" size="mini" type="primary">é‡æ–°ç™»å½•</button>
      </view>
    </view>
  </view>

  <!-- å­¦ä¹ ç»Ÿè®¡åŒºåŸŸ -->
  <view class="learning-stats" wx:if="{{learningStats.totalWordsLearned > 0 || learningStats.totalSessions > 0}}">
    <view class="stats-card">
      <view class="stats-header">
        <view class="stats-title">ğŸ“Š å­¦ä¹ ç»Ÿè®¡</view>
      </view>
      <view class="stats-content">
        <view class="stat-item">
          <view class="stat-number">{{learningStats.totalWordsLearned || 0}}</view>
          <view class="stat-label">å…±å­¦ä¹ </view>
        </view>
        <view class="stat-item">
          <view class="stat-number">{{learningStats.totalMastered || 0}}</view>
          <view class="stat-label">ç´¯è®¡æŒæ¡</view>
        </view>
        <view class="stat-item">
          <view class="stat-number">{{learningStats.currentStreak || 0}}</view>
          <view class="stat-label">è¿ç»­å­¦ä¹ å¤©æ•°</view>
        </view>
      </view>
    </view>
  </view>

  <!-- å¹´çº§é€‰æ‹©åŒºåŸŸ -->
  <view class="grade-selection" wx:if="{{!currentGrade || isFirstTime}}">
    <view class="selection-card">
      <view class="selection-header">
        <view class="selection-title">ğŸ¯ é€‰æ‹©æ‚¨çš„å¹´çº§</view>
        <view class="selection-desc">è¯·é€‰æ‹©æ‚¨è¦å­¦ä¹ çš„å¹´çº§ï¼Œå¼€å§‹æ‚¨çš„å­¦ä¹ ä¹‹æ—…</view>
      </view>
      <view class="selection-content">
        <view class="grade-group" wx:for="{{gradeGroups}}" wx:key="stage">
          <view class="group-title">{{item.stage}}</view>
          <view class="grade-buttons">
            <button class="grade-btn {{item.grades && item.grades.indexOf(currentGrade) > -1 ? 'active' : ''}}"
                    wx:for="{{item.grades}}" wx:for-item="grade" wx:key="grade"
                    bindtap="selectGrade" data-grade="{{grade}}"
                    size="mini">
              {{gradeNames[grade]}}
            </button>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- å¹´çº§åˆ‡æ¢ä¸‹æ‹‰æ¡† -->
  <view class="grade-dropdown" wx:if="{{currentGrade && !isFirstTime}}">
    <view class="dropdown-container">
      <view class="dropdown-label">å½“å‰å¹´çº§ï¼š</view>
      <view class="dropdown-selector" bindtap="toggleDropdown">
        <view class="dropdown-display">
          <text class="dropdown-text">{{currentGradeName}}</text>
          <text class="dropdown-arrow {{dropdownOpen ? 'open' : ''}}">â–¼</text>
        </view>
      </view>
    </view>
    
    <!-- ä¸‹æ‹‰é€‰é¡¹ -->
    <view class="dropdown-options {{dropdownOpen ? 'show' : ''}}" wx:if="{{dropdownOpen}}">
      <view class="dropdown-overlay" bindtap="closeDropdown"></view>
      <view class="dropdown-menu">
        <view class="dropdown-header">
          <text class="dropdown-title">é€‰æ‹©å¹´çº§</text>
          <text class="dropdown-close" bindtap="closeDropdown">âœ•</text>
        </view>
        <view class="dropdown-content">
          <view class="grade-group" wx:for="{{gradeGroups}}" wx:key="stage">
            <view class="group-title">{{item.stage}}</view>
            <view class="grade-options">
              <view class="grade-option {{grade === currentGrade ? 'active' : ''}}"
                    wx:for="{{item.grades}}" wx:for-item="grade" wx:key="grade"
                    bindtap="selectGradeFromDropdown" data-grade="{{grade}}">
                <text class="grade-name">{{gradeNames[grade]}}</text>
                <text class="grade-check" wx:if="{{grade === currentGrade}}">âœ“</text>
              </view>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- ç»§ç»­å­¦ä¹ åŒºåŸŸ - ä¼˜å…ˆæ˜¾ç¤º -->
  <view class="continue-learning-section" wx:if="{{continueLearning && currentGrade && !isFirstTime}}">
    <view class="continue-card" bindtap="continueLearning">
      <view class="continue-icon">ğŸ“–</view>
      <view class="continue-content">
        <view class="continue-title">ç»§ç»­å­¦ä¹  {{continueLearning.gradeName}}</view>
        <view class="continue-subtitle">ç¬¬{{continueLearning.currentPhase}}é˜¶æ®µ Â· å·²æŒæ¡ {{continueLearning.masteredWords || 0}}/{{continueLearning.totalWords || 0}} ä¸ªå•è¯</view>
        <view class="continue-progress">
          <view class="progress-bar">
            <view class="progress-fill" style="width: {{continueLearning.masteryProgress || 0}}%;"></view>
          </view>
          <view class="progress-text">{{continueLearning.masteryProgress || 0}}%</view>
        </view>
      </view>
      <view class="continue-arrow">â†’</view>
    </view>
  </view>

  <!-- å¼€å§‹æ–°å­¦ä¹ åŒºåŸŸ - å½“æ²¡æœ‰ç»§ç»­å­¦ä¹ æ—¶æ˜¾ç¤º -->
  <view class="start-learning-section" wx:if="{{!continueLearning && currentGrade && !isFirstTime}}">
    <view class="start-card" bindtap="startNewLearning">
      <view class="start-icon">ğŸš€</view>
      <view class="start-content">
        <view class="start-title">å¼€å§‹å­¦ä¹  {{currentGradeName}}</view>
        <view class="start-subtitle">å¼€å§‹æ‚¨çš„è¯æ±‡å­¦ä¹ ä¹‹æ—…</view>
      </view>
      <view class="start-arrow">â†’</view>
    </view>
  </view>

  <!-- ä¸ªæ€§åŒ–å¿«é€Ÿè®¿é—®åŒºåŸŸ -->
  <view class="quick-access" wx:if="{{showQuickAccess && currentGrade && !isFirstTime}}">

    <!-- å¸¸ç”¨å¹´çº§ -->
    <view class="favorite-grades" wx:if="{{favoriteGrades.length > 0}}">
      
      <view class="favorite-list">
        
      </view>
    </view>

    <!-- æœ€è¿‘å­¦ä¹  -->
    <view class="recent-learning" wx:if="{{recentLearning.length > 0}}">
      
      <view class="recent-list">
        
      </view>
    </view>
  </view>


  <!-- åˆ‡æ¢æ˜¾ç¤ºæ¨¡å¼æŒ‰é’® -->
  

  <!-- å­¦ä¹ å·¥å…· -->
  <view class="tools-section">
    <view class="section-title">å­¦ä¹ å·¥å…·</view>
    <view class="tools-grid">
      <view class="tool-item" bindtap="goToLevelTest">
        <view class="tool-icon">ğŸ“Š</view>
        <view class="tool-name">æ°´å¹³æµ‹è¯•</view>
      </view>

      <view class="tool-item" bindtap="showWordBook">
        <view class="tool-icon">ğŸ“–</view>
        <view class="tool-name">ç”Ÿè¯æœ¬</view>
      </view>

      <!-- <view class="tool-item" bindtap="goToDebugAudio">
        <view class="tool-icon">ğŸ”Š</view>
        <view class="tool-name">å‘éŸ³æµ‹è¯•</view>
      </view> -->
    </view>
  </view>

  <!-- æµ‹è¯•å†å² -->
  <view class="history-section" wx:if="{{testHistory.length > 0}}">
    <view class="section-header">
      <view class="section-title">æµ‹è¯•å†å²</view>
      <button class="clear-btn ghost" bindtap="clearAllHistory" size="mini">æ¸…ç©º</button>
    </view>

    <view class="history-list">
      <view wx:for="{{testHistory}}" wx:key="id" class="history-item">
        <view class="history-dot"></view>
        <view class="history-info">
          <view class="history-level">{{item.level}}</view>
          <view class="history-score">å¾—åˆ†ï¼š{{item.score}}</view>
          <view class="history-date">{{item.date}}</view>
        </view>
        <button class="delete-btn danger" bindtap="deleteHistory" data-id="{{item.id}}" size="mini">åˆ é™¤</button>
      </view>
    </view>
  </view>

  <!-- å‡çº§æç¤º - å·²éšè— -->
  <!-- <view class="upgrade-section" wx:if="{{!isPremium}}">
    <view class="upgrade-card">
      <view class="upgrade-title">ğŸ¯ å‡çº§ä¼šå‘˜</view>
      <view class="upgrade-desc">è§£é”æ‰€æœ‰åŠŸèƒ½ï¼Œæ— é™æ¬¡æµ‹è¯•</view>
      <view class="upgrade-desc">ä»Šæ—¥å‰©ä½™æµ‹è¯•æ¬¡æ•°ï¼š{{remainingTests}}</view>
      <button class="upgrade-btn primary" bindtap="goToUpgrade">ç«‹å³å‡çº§</button>
    </view>
  </view> -->
</view>